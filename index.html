<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=640" />

    <link rel="stylesheet" href="stylesheets/core.css" media="screen"/>
    <link rel="stylesheet" href="stylesheets/mobile.css" media="handheld, only screen and (max-device-width:640px)"/>
    <link rel="stylesheet" href="stylesheets/pygment_trac.css"/>

    <script type="text/javascript" src="javascripts/modernizr.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="javascripts/headsmart.min.js"></script>
    <script type="text/javascript">
      $(document).ready(function () {
        $('#main_content').headsmart()
      })
    </script>
    <title>Walrus by devinus</title>
  </head>

  <body>
    <a id="forkme_banner" href="https://github.com/devinus/walrus">Fork Me on GitHub</a>
    <div class="shell">

      <header>
        <span class="ribbon-outer">
          <span class="ribbon-inner">
            <h1>Walrus</h1>
            <h2>Walrus - Mustache-like Templating</h2>
          </span>
          <span class="left-tail"></span>
          <span class="right-tail"></span>
        </span>
      </header>

      <section id="downloads">
        <span class="inner">
          <a href="https://github.com/devinus/walrus/zipball/master" class="zip"><em>download</em> .ZIP</a><a href="https://github.com/devinus/walrus/tarball/master" class="tgz"><em>download</em> .TGZ</a>
        </span>
      </section>

      <span class="banner-fix"></span>

      <section id="main_content">
        <p>Walrus is 50% Mustache and 50% large flippered marine mammal.</p>

<p>Lexing is done with Leex and parsing is done with Yecc, both
of which are included in newer versions of Erlang.</p>

<p>Most Mustache constructs work, such as variables, unescaped
variables, blocks, and inverse blocks. However, The Walrus is
an opinionated animal, and partials will never be supported.
Also, functions passed into the context are simply evaluated
and are not passed the raw template.</p>

<p>You can skip lexing and parsing templates every time you want
to render them by using <code>compile/1</code>, which returns a renderer
you can then pass a context that renders the template.</p>

<h1>Examples</h1>

<h2>Simple Render</h2>

<div class="highlight">
<pre><span class="nv">Tmpl</span> <span class="o">=</span> <span class="s">"Hello {{{name}}}.</span>

<span class="s">Drinks:</span>

<span class="s">{{#drinks}}</span>
<span class="s"> - {{name}}, {{tastiness}}</span>
<span class="s">{{/drinks}}"</span><span class="p">.</span>

<span class="nv">Ctx</span> <span class="o">=</span> <span class="p">[{</span><span class="n">name</span><span class="p">,</span> <span class="s">"Devin &amp; Jane"</span><span class="p">},</span>
       <span class="p">{</span><span class="n">drinks</span><span class="p">,</span> <span class="p">[[{</span><span class="n">name</span><span class="p">,</span> <span class="s">"Beer"</span><span class="p">},</span>
                  <span class="p">{</span><span class="n">tastiness</span><span class="p">,</span> <span class="mi">5</span><span class="p">}],</span>
                 <span class="p">[{</span><span class="n">name</span><span class="p">,</span> <span class="s">"Juice"</span><span class="p">},</span>
                  <span class="p">{</span><span class="n">tastiness</span><span class="p">,</span> <span class="mi">8</span><span class="p">}]]}].</span>

<span class="nn">walrus</span><span class="p">:</span><span class="n">render</span><span class="p">(</span><span class="nv">Tmpl</span><span class="p">,</span> <span class="nv">Ctx</span><span class="p">).</span>
<span class="c">% =&gt; &lt;&lt;"Hello Devin &amp; Jane.\n\nDrinks:\n\n\n - Beer, 5\n\n - Juice, 8\n"&gt;&gt;</span>
</pre>
</div>


<h2>Compiled Renderer</h2>

<div class="highlight">
<pre><span class="nv">Renderer</span> <span class="o">=</span> <span class="nn">walrus</span><span class="p">:</span><span class="n">compile</span><span class="p">(</span><span class="s">"Hello {{{name}}}.</span><span class="se">\n\n</span><span class="s">Drinks:</span><span class="se">\n\n</span><span class="s">{{#drinks}}</span><span class="se">\n</span><span class="s"> - {{name}}, {{tastiness}}</span><span class="se">\n</span><span class="s">{{/drinks}}"</span><span class="p">).</span>

<span class="nv">Ctx</span> <span class="o">=</span> <span class="p">[{</span><span class="n">name</span><span class="p">,</span> <span class="s">"Devin &amp; Jane"</span><span class="p">},</span>
       <span class="p">{</span><span class="n">drinks</span><span class="p">,</span> <span class="p">[[{</span><span class="n">name</span><span class="p">,</span> <span class="s">"Beer"</span><span class="p">},</span>
                  <span class="p">{</span><span class="n">tastiness</span><span class="p">,</span> <span class="mi">5</span><span class="p">}],</span>
                 <span class="p">[{</span><span class="n">name</span><span class="p">,</span> <span class="s">"Juice"</span><span class="p">},</span>
                  <span class="p">{</span><span class="n">tastiness</span><span class="p">,</span> <span class="mi">8</span><span class="p">}]]}].</span>

<span class="nv">Renderer</span><span class="p">(</span><span class="nv">Ctx</span><span class="p">).</span>
<span class="c">% =&gt; &lt;&lt;"Hello Devin &amp; Jane.\n\nDrinks:\n\n\n    - Beer, 5\n\n    - Juice, 8\n"&gt;&gt;</span>
</pre>
</div>


<h1>Acknowledgments</h1>

<p>Robert Virding helped me tremendously when I struggled to
understand Leex. He's also responsible for
<code>([^{}]|({[^{])|(}[^}]))+</code>.</p>

<h1>License</h1>

<p>All code released into the public domain (see <code>UNLICENSE</code>)
except for the file <code>walrus_mochinum.erl</code>, which has it's own
license (see <code>LICENSE</code>).</p>
      </section>

      <footer>
        <span class="ribbon-outer">
          <span class="ribbon-inner">
            <p>this project by <a href="https://github.com/devinus">devinus</a> can be found on <a href="https://github.com/devinus/walrus">GitHub</a></p>
          </span>
          <span class="left-tail"></span>
          <span class="right-tail"></span>
        </span>
        <p>Generated with <a href="http://pages.github.com">GitHub Pages</a> using Merlot</p>
        <span class="octocat"></span>
      </footer>

    </div>

    
  </body>
</html>
